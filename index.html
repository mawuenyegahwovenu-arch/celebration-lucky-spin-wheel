<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>üéâ Birthday Wheel - Spin to Win GOOD LUCK!</title>
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
<!-- Font Awesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
:root{
  --accent:#d63384;
  --glass: rgba(255,255,255,0.92);
  --card: rgba(255,255,255,0.95);
  --sea-1: #032B44;
  --sea-2: #0E6E93;
  --sea-3: #A7E9FF;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  min-height:100%;
  font-family:"Inter", Arial, sans-serif;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  background: 
    radial-gradient(circle at 10% 20%, rgba(255,215,0,0.15) 0%, transparent 25%),
    radial-gradient(circle at 90% 80%, rgba(255,20,147,0.15) 0%, transparent 25%),
    radial-gradient(circle at 50% 50%, rgba(0,255,255,0.1) 0%, transparent 30%),
    linear-gradient(to top, var(--sea-1) 0%, var(--sea-2) 45%, var(--sea-3) 100%);
  color:#033047;
  padding:20px;
  overflow-x:hidden;
  position: relative;
  -webkit-tap-highlight-color: transparent;
}

/* PULSATING SHAKE ANIMATION FOR ALL BUTTONS */
@keyframes pulseShake {
  0% { transform: translateX(0); }
  25% { transform: translateX(-2px); }
  50% { transform: translateX(2px); }
  75% { transform: translateX(-1px); }
  100% { transform: translateX(0); }
}

/* Floating Balloons - MOBILE OPTIMIZED */
.floating-balloon {
  position: fixed;
  bottom: -100px;
  width: 60px;
  height: 80px;
  font-size: 40px;
  text-align: center;
  cursor: pointer;
  animation: floatUp 30s linear infinite;
  z-index: 5;
  filter: drop-shadow(0 8px 16px rgba(0,0,0,0.2));
  transition: transform 0.3s ease;
  pointer-events: auto;
}
.floating-balloon:hover {
  transform: scale(1.2);
}
@keyframes floatUp {
  0% { transform: translateY(0) rotate(0deg); }
  100% { transform: translateY(-120vh) rotate(20deg); }
}
@keyframes pop {
  0% { transform: scale(1); opacity: 1; }
  100% { transform: scale(2); opacity: 0; }
}

/* Sparkles */
.sparkle {
  position: absolute;
  width: 6px;
  height: 6px;
  background: #FFD700;
  border-radius: 50%;
  animation: sparkleMove 4s infinite;
  pointer-events: none;
  z-index: 1;
}
@keyframes sparkleMove {
  0%, 100% { opacity: 0; transform: scale(0.5); }
  50% { opacity: 1; transform: scale(1); }
}

.header-wrap{width:100%; max-width:980px; text-align:center; margin-bottom:12px; position: relative; z-index: 10;}
.title {
  font-family: "Fredoka One", cursive;
  color:#fff;
  font-size:32px;
  margin:6px 0 15px;
  text-shadow:0 6px 18px rgba(0,0,0,0.14);
  background: linear-gradient(45deg, #FFD700, #FF1493, #00FFFF);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: titleGlow 3s infinite alternate;
}
@keyframes titleGlow {
  0% { filter: drop-shadow(0 0 5px rgba(255,215,0,0.5)); }
  100% { filter: drop-shadow(0 0 15px rgba(255,20,147,0.7)); }
}

.top-statement {
  color:#fff;
  margin-bottom:10px;
  font-weight:700;
  letter-spacing:.4px;
  font-size: 20px;
  text-shadow: 0 2px 8px rgba(0,0,0,0.3);
  background: linear-gradient(45deg, #FFD700, #FF69B4, #00CED1);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  padding: 5px 15px;
  border-radius: 10px;
  background-color: rgba(255,255,255,0.1);
}

/* FIXED: Text overflow for mobile */
.romance {
  max-width:920px;
  background: rgba(255,255,255,0.95);
  border-radius:15px;
  padding:18px 22px;
  color:#033047;
  box-shadow: 0 14px 40px rgba(0,0,0,0.14);
  margin-bottom:20px;
  text-align:left;
  white-space:pre-wrap;
  border-left: 6px solid var(--accent);
  position: relative;
  z-index: 10;
  font-size: 17px;
  line-height: 1.7;
  border-right: 3px solid #FFD700;
  /* MOBILE FIX: Prevent text overflow */
  word-wrap: break-word;
  overflow-wrap: break-word;
  hyphens: auto;
}

/* ========== FIXED: WHEEL CENTERING ========== */
#wheelWrap { 
  width: 340px; 
  margin: 25px auto; 
  position: relative; 
  height: 340px; 
  background: linear-gradient(135deg, var(--card), #fff5f7); 
  border-radius: 25px; 
  padding: 20px; 
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 
    0 25px 60px rgba(0,0,0,0.15),
    0 0 0 4px rgba(255,215,0,0.4),
    0 0 0 8px rgba(255,20,147,0.3);
  z-index:20;
  animation: wheelFloat 4s ease-in-out infinite;
  border: 3px solid rgba(255,255,255,0.8);
  transition: box-shadow 0.5s ease;
  /* Mobile responsiveness */
  max-width: 90vw;
  max-height: 90vw;
  /* MOBILE: Hardware acceleration */
  transform: translateZ(0);
  backface-visibility: hidden;
}
@keyframes wheelFloat {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-12px); }
}

/* Enhanced wheel glow effect */
#wheelWrap::after {
  content: '';
  position: absolute;
  top: -10px;
  left: -10px;
  right: -10px;
  bottom: -10px;
  background: radial-gradient(circle at center, 
    rgba(255,215,0,0.3) 0%,
    rgba(255,20,147,0.2) 30%,
    transparent 70%);
  border-radius: 35px;
  z-index: -1;
  animation: glowPulse 3s infinite alternate;
  pointer-events: none;
}
@keyframes glowPulse {
  0% { opacity: 0.5; transform: scale(1); }
  100% { opacity: 0.8; transform: scale(1.05); }
}

#wheelWrap.pulse-wheel {
  animation: pulseGlow 1.5s infinite !important;
}

#wheelWrap::before {
  content: '';
  position: absolute;
  top: -15px;
  left: -15px;
  right: -15px;
  bottom: -15px;
  background: 
    radial-gradient(10px 10px at 20% 30%, #FFD700 50%, transparent 100%),
    radial-gradient(10px 10px at 80% 70%, #FF1493 50%, transparent 100%),
    radial-gradient(10px 10px at 40% 90%, #00FFFF 50%, transparent 100%);
  border-radius: 35px;
  animation: sparkle 4s infinite alternate;
  z-index: -1;
  pointer-events: none;
  opacity: 0.6;
}
@keyframes sparkle {
  0%, 100% { opacity: 0.3; transform: rotate(0deg); }
  50% { opacity: 1; transform: rotate(180deg); }
}
@keyframes pulseGlow {
  0%, 100% { box-shadow: 0 0 20px rgba(255,215,0,0.5), 0 25px 60px rgba(0,0,0,0.15), 0 0 0 4px rgba(255,215,0,0.4), 0 0 0 8px rgba(255,20,147,0.3); }
  50% { box-shadow: 0 0 40px rgba(255,215,0,0.9), 0 25px 60px rgba(0,0,0,0.15), 0 0 0 4px rgba(255,215,0,0.8), 0 0 0 8px rgba(255,20,147,0.7), 0 0 0 12px rgba(0,206,209,0.5); }
}

/* Fixed: Canvas perfect centering */
#wheelCanvas {
  display:block;
  border-radius:50%;
  background:transparent;
  width: 290px !important;
  height: 290px !important;
  box-shadow: inset 0 -8px 25px rgba(0,0,0,0.06);
  max-width: 100%;
  max-height: 100%;
  aspect-ratio: 1 / 1;
  transform: translateZ(0);
  will-change: transform;
  touch-action: manipulation;
}

/* Fixed: Pointer better positioning */
#pointer { 
  position:absolute; 
  top:-40px;
  left:50%; 
  transform:translateX(-50%); 
  width:0; 
  height:0; 
  border-left:32px solid transparent;
  border-right:32px solid transparent; 
  border-bottom:65px solid #ff4d6d; 
  z-index:100;
  pointer-events:none; 
  filter: drop-shadow(0 10px 20px rgba(0,0,0,0.4));
  animation: pointerPulse 1.2s infinite alternate;
}
@keyframes pointerPulse {
  0% { transform: translateX(-50%) scale(1); }
  100% { transform: translateX(-50%) scale(1.15); }
}

/* Mobile centering fixes */
@media (max-width: 768px) {
  #wheelWrap {
    width: min(340px, 85vw);
    height: min(340px, 85vw);
    margin: 20px auto;
  }
  
  #wheelCanvas {
    width: min(290px, 75vw) !important;
    height: min(290px, 75vw) !important;
  }
  
  #pointer {
    top: -35px;
    border-left: 28px solid transparent;
    border-right: 28px solid transparent;
    border-bottom: 55px solid #ff4d6d;
  }
  
  .floating-balloon {
    animation-duration: 40s;
  }
  
  .floating-balloon:nth-child(n+8) {
    display: none;
  }
}

@media (max-width: 480px) {
  #wheelWrap {
    width: min(300px, 90vw);
    height: min(300px, 90vw);
    padding: 15px;
  }
  
  #wheelCanvas {
    width: min(260px, 80vw) !important;
    height: min(260px, 80vw) !important;
  }
}

#controls { 
  margin-top:25px; 
  display:flex; 
  gap:18px; 
  align-items:center; 
  justify-content:center; 
  z-index:20;
  flex-wrap: wrap;
}
#btn, #resetBtn, #muteBtn, #shareBtn { 
  animation: pulseShake 3s infinite ease-in-out;
  position: relative;
  transition: all 0.3s ease;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
  user-select: none;
}

#btn, #resetBtn { 
  padding:16px 35px; 
  font-size:22px; 
  background: linear-gradient(180deg,#ff7aa8,#d63384); 
  color:white; 
  border:none; 
  cursor:pointer; 
  border-radius:35px; 
  font-weight:800; 
  box-shadow:0 15px 35px rgba(214,51,132,0.3); 
  letter-spacing:1px; 
  overflow: hidden;
  min-height: 60px;
}
#btn::before, #resetBtn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
  transition: 0.6s;
}
#btn:hover::before, #resetBtn:hover::before {
  left: 100%;
}
#btn:hover, #resetBtn:hover, #muteBtn:hover, #shareBtn:hover {
  animation: pulseShake 1s infinite ease-in-out;
  transform: translateY(-3px);
}
#btn:hover {
  box-shadow: 0 20px 40px rgba(214,51,132,0.4);
}
#resetBtn{ 
  padding:12px 25px; 
  font-size:18px; 
  background: linear-gradient(180deg, #8e9eab, #6c757d); 
  border-radius:25px; 
  box-shadow:0 10px 25px rgba(108,117,125,0.3); 
  margin-left:15px; 
}
#resetBtn:hover {
  box-shadow: 0 15px 30px rgba(108,117,125,0.4);
}
#btn:active, #resetBtn:active, #muteBtn:active, #shareBtn:active { 
  transform:translateY(3px) scale(.97); 
  box-shadow:0 8px 20px rgba(214,51,132,0.25);
  animation: none;
}
#btn[disabled]{ 
  opacity:.6; 
  cursor:not-allowed; 
  filter: grayscale(0.5);
  animation: none;
}

#muteBtn{
  background: rgba(255,255,255,0.25);
  border: 3px solid rgba(255,255,255,0.4);
  cursor:pointer;
  font-size:32px;
  color:white;
  opacity:.9;
  padding: 10px 15px;
  margin-left:15px;
  display:flex;
  align-items:center;
  border-radius: 50%;
  width: 60px;
  height: 60px;
  justify-content: center;
  backdrop-filter: blur(5px);
  min-width: 70px;
  min-height: 70px;
}
#muteBtn:hover{ 
  opacity:1; 
  transform: scale(1.15) translateY(-3px); 
  background: rgba(255,255,255,0.35); 
}

#status { margin-top:20px; font-weight:800; color:#fff; z-index:20; display:flex; align-items:center; justify-content:center; font-size: 20px; text-shadow: 0 3px 8px rgba(0,0,0,0.4); gap: 10px; }
#status i { color: #FFD700; }

#prize { 
  font-size: 36px;
  margin-top:30px; 
  font-weight:900;
  color:#FFEB3B;
  min-height:80px;
  text-shadow:0 10px 30px rgba(0,0,0,0.5);
  padding: 30px 40px;
  background: linear-gradient(45deg, rgba(255,215,0,0.3), rgba(255,20,147,0.3), rgba(0,206,209,0.3));
  border-radius: 25px;
  border: 5px solid rgba(255,255,255,0.6);
  text-align: center;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 96%;
  max-width: 600px;
  margin-left: auto;
  margin-right: auto;
  line-height: 1.3;
  animation: prizeGlow 2s infinite alternate;
  position: relative;
  z-index: 20;
  backdrop-filter: blur(5px);
  word-wrap: break-word;
  overflow-wrap: break-word;
}
@keyframes prizeGlow {
  0% { box-shadow: 0 0 25px rgba(255,215,0,0.5), inset 0 0 25px rgba(255,255,255,0.15); }
  100% { box-shadow: 0 0 50px rgba(255,20,147,0.7), inset 0 0 35px rgba(255,255,255,0.25); }
}
.pop { 
  animation: pop 800ms cubic-bezier(.2,.8,.2,1) forwards; 
  color:#FFEB3B; 
  text-shadow: 0 10px 30px rgba(255,235,59,0.7); 
}
@keyframes pop { 
  0%{transform:scale(0.5); opacity:0; background-color: rgba(255,255,255,0)} 
  50%{transform:scale(1.25); opacity:1; background-color: rgba(255,255,255,0.4)} 
  100%{transform:scale(1); opacity:1; background-color: rgba(255,255,255,0.2)} 
}

/* VIDEO GALLERY STYLES - FIXED */
.video-gallery-container {
  margin-top: 30px;
  max-width: 920px;
  width: 100%;
  z-index: 20;
}

.video-gallery-title {
  color: #fff;
  text-shadow: 0 3px 10px rgba(0,0,0,0.4);
  font-size: 24px;
  text-align: center;
  margin-bottom: 20px;
  position: relative;
  z-index: 20;
}

.video-gallery {
  display: flex;
  justify-content: center;
  gap: 18px;
  flex-wrap: wrap;
  max-width: 920px;
  z-index: 20;
}

.video-item {
  width: 300px;
  height: 300px;
  border-radius: 18px;
  border: 5px solid var(--accent);
  box-shadow: 0 15px 35px rgba(214,51,132,0.2);
  transition: all 0.4s ease;
  display: block;
  cursor: pointer;
  overflow: hidden;
  position: relative;
}

.video-item:hover {
  transform: scale(1.08);
  box-shadow: 0 20px 40px rgba(214,51,132,0.4);
  border-color: #FFD700;
}

.video-item video {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 12px;
  transition: all 0.4s ease;
  transform: translateZ(0);
  backface-visibility: hidden;
}

.video-play-button {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 60px;
  color: white;
  text-shadow: 0 4px 10px rgba(0,0,0,0.5);
  opacity: 0.8;
  transition: all 0.3s ease;
  z-index: 5;
  pointer-events: none;
}

.video-item:hover .video-play-button {
  opacity: 1;
  transform: translate(-50%, -50%) scale(1.2);
}

/* MOBILE VIDEO LIGHTBOX FIXES */
.video-lightbox {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.95);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
  animation: fadeIn 0.3s ease;
  touch-action: manipulation;
  -webkit-overflow-scrolling: touch;
}

.video-lightbox-content {
  position: relative;
  width: 95%;
  max-width: 800px;
  max-height: 90vh;
  background: #000;
  border-radius: 10px;
  overflow: hidden;
}

.video-lightbox-content video {
  width: 100%;
  height: auto;
  max-height: 70vh;
  display: block;
  border-radius: 0;
}

/* Desktop close button */
.close-video-lightbox {
  position: absolute;
  top: -50px;
  right: 0;
  background: rgba(255,255,255,0.25);
  color: white;
  border: none;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  font-size: 28px;
  cursor: pointer;
  transition: all 0.4s ease;
  backdrop-filter: blur(5px);
  z-index: 1001;
}

.close-video-lightbox:hover {
  background: rgba(255,255,255,0.5);
  transform: scale(1.15);
}

/* MOBILE-SPECIFIC CLOSE BUTTONS */
.video-lightbox-header {
  display: none;
}

.mobile-controls {
  display: none;
}

.close-video-lightbox-mobile {
  display: none;
}

/* MOBILE STYLES */
@media (max-width: 768px) {
  .close-video-lightbox {
    display: none;
  }
  
  .video-lightbox-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px;
    background: rgba(0,0,0,0.8);
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1001;
  }
  
  .close-video-lightbox-mobile {
    display: block;
    background: rgba(255,255,255,0.2);
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 20px;
    font-size: 16px;
    cursor: pointer;
    backdrop-filter: blur(10px);
  }
  
  .video-title {
    color: white;
    font-size: 16px;
    font-weight: bold;
  }
  
  .mobile-controls {
    display: block;
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 20px;
    background: linear-gradient(to top, rgba(0,0,0,0.9), transparent);
    z-index: 1001;
  }
  
  .mobile-close-btn {
    width: 100%;
    padding: 15px;
    background: rgba(255,255,255,0.2);
    color: white;
    border: 2px solid rgba(255,255,255,0.4);
    border-radius: 25px;
    font-size: 18px;
    font-weight: bold;
    cursor: pointer;
    backdrop-filter: blur(10px);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
  }
  
  .mobile-close-btn i {
    font-size: 22px;
  }
  
  .video-lightbox-content {
    width: 100%;
    height: 100%;
    max-height: 100vh;
    border-radius: 0;
    display: flex;
    flex-direction: column;
  }
  
  .video-lightbox-content video {
    max-height: calc(100vh - 120px);
    flex: 1;
  }
  
  .close-video-lightbox-mobile,
  .mobile-close-btn {
    min-height: 50px;
    min-width: 100px;
  }
}

@media (max-width: 480px) {
  .video-lightbox-header {
    padding: 12px;
  }
  
  .close-video-lightbox-mobile {
    padding: 8px 16px;
    font-size: 14px;
  }
  
  .mobile-close-btn {
    padding: 12px;
    font-size: 16px;
  }
  
  .video-title {
    font-size: 14px;
  }
}

/* PICTURE GALLERY - MOBILE OPTIMIZED */
#gallery { 
  margin-top:30px; 
  display:flex; 
  justify-content:center; 
  gap:18px; 
  flex-wrap:wrap; 
  max-width:920px; 
  z-index:20; 
}
#gallery img {
  object-fit: cover;
  border-radius:18px;
  border:5px solid var(--accent);
  box-shadow:0 15px 35px rgba(214,51,132,0.2);
  transition: all 0.4s ease;
  display:block;
  cursor: pointer;
  width: 100%;
  max-width: 300px;
  height: 300px;
  image-rendering: -webkit-optimize-contrast;
  image-rendering: crisp-edges;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  transform: translateZ(0);
  backface-visibility: hidden;
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200% 100%;
  animation: loading 1.5s infinite;
}

@keyframes loading {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

#gallery img.loaded {
  background: none;
  animation: none;
}

#gallery img:hover {
  transform: scale(1.08) rotate(3deg);
  box-shadow: 0 20px 40px rgba(214,51,132,0.4);
  border-color: #FFD700;
}

.caption { 
  margin-top:25px; 
  max-width:720px; 
  background: linear-gradient(180deg, rgba(255,255,255,0.97), rgba(255,245,250,0.97)); 
  padding:22px 28px; 
  border-radius:18px; 
  box-shadow: 0 15px 35px rgba(0,0,0,0.12); 
  color:#033047; 
  font-size:17px; 
  line-height:1.6; 
  text-align:center; 
  z-index:20; 
  white-space:pre-wrap;
  border-top: 4px solid #FFD700;
  border-bottom: 4px solid #FF1493;
  border-left: 3px solid #00CED1;
  border-right: 3px solid #9370DB;
  word-wrap: break-word;
  overflow-wrap: break-word;
  hyphens: auto;
}
footer { 
  margin-top:30px; 
  opacity:.95; 
  font-size:16px; 
  z-index:20; 
  text-align:center; 
  width:100%; 
  color:#fff; 
  text-shadow: 0 3px 8px rgba(0,0,0,0.4); 
}

/* Share Button at Bottom - NOW WITH PULSATING */
#shareBtn {
  display: block !important;
  margin: 40px auto 20px auto !important;
  padding: 20px 40px !important;
  font-size: 24px !important;
  background: linear-gradient(180deg, #25D366, #128C7E) !important;
  color: #fff !important;
  border: none !important;
  border-radius: 20px !important;
  cursor: pointer !important;
  font-weight: 800 !important;
  box-shadow: 0 15px 40px rgba(2,68,20,0.3) !important;
  transition: all 0.4s ease !important;
  z-index: 20 !important;
  letter-spacing: 1px !important;
  position: relative !important;
  width: 90% !important;
  max-width: 500px !important;
  animation: pulseShake 3s infinite ease-in-out !important;
  -webkit-tap-highlight-color: transparent !important;
  touch-action: manipulation !important;
  min-height: 70px !important;
}

#shareBtn:hover {
  transform: translateY(-5px) scale(1.05) !important;
  box-shadow: 0 20px 50px rgba(2,68,20,0.4) !important;
  animation: pulseShake 1s infinite ease-in-out !important;
}

#shareBtn:active {
  animation: none !important;
}

.confetti { position:fixed; left:0;top:0; width:100%;height:100%; pointer-events:none; overflow:hidden; z-index:12; }
.confetti span{ position:absolute; width:12px; height:18px; border-radius:5px; opacity:0.95; transform-origin:center; top:-10%; animation:fall linear infinite; }
@keyframes fall{ 0%{transform: translateY(-10vh) rotate(0) scale(1); opacity:1} 100%{transform: translateY(110vh) rotate(720deg) scale(1); opacity:0.95} }

.falling-flowers{ position:fixed; inset:0; pointer-events:none; overflow:hidden; z-index:1; }
.flower {
  position:absolute;
  top:-10%;
  border-radius:50%;
  background-size:cover;
  background-position:center;
  transform-origin:center;
  opacity:0.95;
  filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1));
  animation: fallFlower linear infinite;
}
@keyframes fallFlower {
  0% { transform: translateY(-10vh) rotate(0deg) translateX(0); opacity:1; }
  25% { transform: translateY(30vh) rotate(90deg) translateX(var(--sx)); }
  50% { transform: translateY(60vh) rotate(180deg) translateX(0); }
  75% { transform: translateY(90vh) rotate(270deg) translateX(var(--sx)); }
  100% { transform: translateY(110vh) rotate(360deg) translateX(0); opacity:0.95; }
}

#prizeLog{
  margin-top:30px;
  max-width:500px;
  width:100%;
  background: linear-gradient(180deg, rgba(255,255,255,0.97), rgba(240,248,255,0.97));
  border-radius:18px;
  padding:22px 28px;
  box-shadow: 0 20px 45px rgba(0,0,0,0.15);
  color:#033047;
  text-align:left;
  z-index:20;
  border: 3px solid rgba(255,215,0,0.4);
  backdrop-filter: blur(5px);
}
#prizeLog h3 { margin-top:0; font-size:22px; color:var(--accent); text-align: center; margin-bottom: 20px; }
#prizeLog ul { list-style-type: none; padding:0; margin:0; }
#prizeLog ul li { padding:10px 0; border-bottom:3px dashed rgba(3,48,71,0.2); font-size:17px; display:flex; justify-content:space-between; align-items:center; transition: all 0.4s ease; }
#prizeLog ul li:hover { background: rgba(255,215,0,0.15); padding-left: 15px; border-radius: 8px; }
#prizeLog ul li:last-child { border-bottom:none; }

.toast-wrap { position:fixed; left:50%; transform:translateX(-50%); top:25px; z-index:100; pointer-events:none; display:flex; flex-direction:column; gap:12px; align-items:center; }
.toast { pointer-events:auto; background: linear-gradient(180deg, rgba(255,255,255,0.99), rgba(225,245,255,0.97)); border-radius:18px; padding:18px 25px; color:#033047; box-shadow: 0 20px 50px rgba(0,0,0,0.2); min-width:320px; display:flex; gap:15px; align-items:center; border:2px solid rgba(255,255,255,0.7); position:relative; backdrop-filter: blur(10px); }
.toast.info{ border-left:10px solid #4aa3ff; }
.toast.success{ border-left:10px solid #28a745; }
.toast.error{ border-left:10px solid #ff4d6d; font-weight:800; }
.toast .bubbles{ position:absolute; right:12px; bottom:-10px; width:65px; height:65px; opacity:0.25; background: radial-gradient(circle at 25% 25%, #aee9ff 0%, transparent 35%), radial-gradient(circle at 75% 75%, #7ad6ff 0%, transparent 30%); border-radius:50%; transform:scale(1); }

.win-banner { 
  position:fixed; 
  left:50%; 
  top:50%; 
  transform:translate(-50%,-50%) scale(.96); 
  z-index:200; 
  pointer-events:auto; 
  background: linear-gradient(135deg,#e6fbff,#fff5ff,#fffff0); 
  border-radius:30px; 
  padding:45px 55px; 
  text-align:center; 
  box-shadow: 
    0 50px 120px rgba(2,24,60,0.5),
    0 0 0 1500px rgba(0,0,0,0.7);
  min-width:420px; 
  display:none; 
  align-items:center; 
  gap:25px; 
  flex-direction:column;
  border: 10px solid rgba(255,255,255,0.9);
}
.win-banner.show { display:flex; animation: winScale 600ms cubic-bezier(.2,.9,.3,1); }
@keyframes winScale { 
  0%{transform:translate(-50%,-50%) scale(.7); opacity:0} 
  60%{transform:translate(-50%,-50%) scale(1.1); opacity:1} 
  100%{transform:translate(-50%,-50%) scale(1); opacity:1} 
}
.win-banner .title {
  font-size: 40px;
  color: #d63384;
  margin-bottom: 20px;
  text-shadow: 0 3px 15px rgba(214,51,132,0.4);
  background: linear-gradient(45deg, #FF1493, #FFD700);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}
.win-banner .sub {
  font-size: 38px;
  font-weight: 900;
  color: #033047;
  text-align: center;
  padding: 25px 35px;
  background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(255,245,250,0.98));
  border-radius: 18px;
  border: 5px solid rgba(214,51,132,0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 320px;
  min-height: 85px;
  box-shadow: inset 0 0 30px rgba(255,215,0,0.3);
}

/* Lightbox for images */
.lightbox {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.95);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 300;
  animation: fadeIn 0.3s ease;
}
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}
.lightbox-content {
  position: relative;
  max-width: 90%;
  max-height: 90%;
}
.lightbox-content img {
  max-width: 100%;
  max-height: 85vh;
  border-radius: 15px;
  box-shadow: 0 30px 80px rgba(0,0,0,0.6);
}
.close-lightbox {
  position: absolute;
  top: -50px;
  right: 0;
  background: rgba(255,255,255,0.25);
  color: white;
  border: none;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  font-size: 28px;
  cursor: pointer;
  transition: all 0.4s ease;
  backdrop-filter: blur(5px);
}

.close-lightbox:hover {
  background: rgba(255,255,255,0.5);
  transform: scale(1.15);
}

/* Birthday Card */
.birthday-card-container {
  margin: 30px auto;
  width: 350px;
  z-index: 20;
}
.birthday-card {
  width: 100%;
  height: 220px;
  perspective: 1200px;
  cursor: pointer;
}
.card-front, .card-inside {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  border-radius: 25px;
  padding: 30px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  box-shadow: 0 20px 50px rgba(0,0,0,0.25);
  transition: transform 0.9s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
.card-front {
  background: linear-gradient(135deg, #ff7aa8, #d63384, #ff1493);
  color: white;
}
.card-inside {
  background: linear-gradient(135deg, #fff0f5, #ffe4e1, #fffaf0);
  transform: rotateY(180deg);
  text-align: center;
  justify-content: space-around;
}
.birthday-card:hover .card-front {
  transform: rotateY(180deg);
}
.birthday-card:hover .card-inside {
  transform: rotateY(0);
}
.envelope-icon {
  font-size: 80px;
  margin-top: 15px;
  animation: bounce 2s infinite;
  filter: drop-shadow(0 8px 15px rgba(0,0,0,0.3));
}
@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-25px); }
}
.card-message {
  font-size: 18px;
  line-height: 1.6;
  margin-bottom: 20px;
  color: #333;
}
.card-signature {
  font-family: "Fredoka One", cursive;
  color: #d63384;
  font-size: 22px;
  margin-top: 15px;
  text-shadow: 0 2px 5px rgba(214,51,132,0.2);
}

/* Rating System */
.birthday-rating {
  background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,250,245,0.95));
  border-radius: 20px;
  padding: 25px;
  margin: 30px auto;
  max-width: 550px;
  width: 100%;
  text-align: center;
  box-shadow: 0 15px 40px rgba(0,0,0,0.15);
  z-index: 20;
  border: 3px solid rgba(255,215,0,0.4);
  backdrop-filter: blur(5px);
}
.birthday-rating h4 {
  margin-top: 0;
  color: #d63384;
  font-size: 24px;
  margin-bottom: 20px;
  text-shadow: 0 2px 5px rgba(214,51,132,0.2);
}
.stars {
  display: flex;
  justify-content: center;
  gap: 15px;
  margin-bottom: 20px;
}
.stars span {
  font-size: 48px;
  color: #ddd;
  cursor: pointer;
  transition: all 0.4s ease;
  text-shadow: 0 3px 8px rgba(0,0,0,0.3);
}
.stars span:hover {
  transform: scale(1.3);
}
.rating-message {
  font-size: 22px;
  font-weight: 800;
  color: #033047;
  min-height: 40px;
  padding: 10px;
  border-radius: 10px;
  transition: all 0.4s ease;
}

/* Birthday Countdown */
.birthday-countdown {
  background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,250,245,0.95));
  border-radius: 20px;
  padding: 25px;
  margin: 20px auto;
  max-width: 550px;
  width: 100%;
  text-align: center;
  box-shadow: 0 15px 40px rgba(0,0,0,0.15);
  z-index: 20;
  border: 3px solid rgba(255,20,147,0.4);
  backdrop-filter: blur(5px);
}
.countdown-title {
  color: #d63384;
  font-size: 24px;
  margin-bottom: 20px;
  text-shadow: 0 2px 5px rgba(214,51,132,0.2);
}
.countdown-timer {
  display: flex;
  justify-content: center;
  gap: 20px;
}
.countdown-item {
  background: linear-gradient(135deg, #ff7aa8, #d63384, #ff1493);
  color: white;
  padding: 15px;
  border-radius: 15px;
  min-width: 85px;
  box-shadow: 0 10px 25px rgba(214,51,132,0.4);
  transition: all 0.3s ease;
}
.countdown-item:hover {
  transform: translateY(-5px);
  box-shadow: 0 15px 30px rgba(214,51,132,0.5);
}
.countdown-number {
  font-size: 36px;
  font-weight: 900;
  display: block;
  text-shadow: 0 2px 5px rgba(0,0,0,0.3);
}
.countdown-label {
  font-size: 14px;
  opacity: 0.9;
  letter-spacing: 1px;
}

/* Final Birthday Gift */
.final-gift {
  background: linear-gradient(135deg, rgba(255,255,255,0.98), rgba(255,250,240,0.98));
  border-radius: 25px;
  padding: 30px;
  margin: 30px auto;
  max-width: 600px;
  width: 100%;
  text-align: center;
  box-shadow: 0 20px 50px rgba(0,0,0,0.2);
  z-index: 20;
  border: 5px solid rgba(255,215,0,0.6);
  backdrop-filter: blur(5px);
  display: none;
}
.final-gift.show {
  display: block;
  animation: giftAppear 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
@keyframes giftAppear {
  0% { transform: scale(0.5); opacity: 0; }
  100% { transform: scale(1); opacity: 1; }
}
.gift-title {
  color: #d63384;
  font-size: 32px;
  margin-bottom: 20px;
  text-shadow: 0 2px 8px rgba(214,51,132,0.3);
}
.gift-content {
  font-size: 24px;
  line-height: 1.6;
  color: #033047;
  padding: 20px;
  background: linear-gradient(135deg, rgba(255,245,250,0.8), rgba(255,250,245,0.8));
  border-radius: 15px;
  border: 3px solid rgba(255,20,147,0.3);
  margin-bottom: 20px;
}
.gift-emoji {
  font-size: 60px;
  margin: 15px 0;
  animation: giftPulse 2s infinite;
}
@keyframes giftPulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.2); }
}

@media (max-width:520px){
  #wheelWrap { width:min(280px, 85vw); height:min(280px, 85vw); }
  #wheelCanvas { width:min(240px, 75vw) !important; height:min(240px, 75vw) !important; }
  .romance { font-size:15px; padding:15px; }
  #btn { padding:14px 28px; font-size:20px; min-height: 55px; }
  #resetBtn { padding:10px 20px; font-size:16px; min-height: 55px; }
  #prize {
    font-size: 28px;
    padding: 22px 30px;
    min-height: 70px;
  }
  .win-banner {
    min-width: 320px;
    padding: 30px 35px;
  }
  .win-banner .title {
    font-size: 32px;
  }
  .win-banner .sub {
    font-size: 28px;
    min-width: 250px;
    padding: 20px 25px;
  }
  .birthday-card-container {
    width: 300px;
  }
  .countdown-timer {
    gap: 10px;
  }
  .countdown-item {
    min-width: 70px;
    padding: 12px;
  }
  .countdown-number {
    font-size: 28px;
  }
  .final-gift {
    padding: 20px;
  }
  .gift-title {
    font-size: 26px;
  }
  .gift-content {
    font-size: 20px;
  }
  .video-item, #gallery img {
    width: 280px;
    height: 280px;
  }
  #shareBtn {
    padding: 15px 30px !important;
    font-size: 20px !important;
    min-height: 60px !important;
  }
  #muteBtn {
    width: 70px;
    height: 70px;
    font-size: 36px;
  }
}

@media (max-width:400px){
  .controls {
    flex-direction: column;
    align-items: center;
  }
  #btn, #resetBtn, #muteBtn {
    width: 100%;
    max-width: 300px;
    margin-bottom: 10px;
  }
  .video-item, #gallery img {
    width: 100%;
    height: 250px;
    max-width: 100%;
  }
  .floating-balloon {
    animation-duration: 50s;
  }
  .floating-balloon:nth-child(n+5) {
    display: none;
  }
}
</style>
</head>
<body>

<div class="confetti" aria-hidden="true">
  <span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span>
</div>

<div id="fallingFlowers" class="falling-flowers" aria-hidden="true"></div>

<header class="header-wrap">
  <div class="top-statement">üéØ Spin the Wheel & Win Amazing Birthday Surprises! üéÅ</div>
 <div class="title">‚ú®üéÇ BIRTHDAY CELEBRATION WHEEL üéÇ‚ú®</div>
</header>

<div class="romance" id="romance">
üéâ‚ú® HAPPY BIRTHDAY, HELLEN‚ù§Ô∏è! ‚ú®üéâ

üåü Today is ALL ABOUT YOU ‚Äî the incredible person who brings sunshine ‚òÄÔ∏è, laughter üòÇ, and endless joy to everyone around! 
I'm beyond grateful to have you as a friend and to celebrate this magical day with you! ü•≥

üíù May your birthday overflow with happiness that makes your heart dance üíÉ, 
smiles that light up your entire world üåà, and memories that make your soul soar! ü¶ã

üéä You deserve ALL the love ‚ù§Ô∏è, blessings üôè, and beautiful surprises üéÅ this universe has to offer! 
Here's to a year packed with amazing adventures üó∫Ô∏è, dreams coming true ‚ú®, and moments you'll treasure forever! ü•∞

üéÇüéà HAPPY BIRTHDAY, DEAR! üéàüéÇ
</div>

<!-- Birthday Countdown -->
<div class="birthday-countdown">
  <div class="countdown-title">‚è≥ PARTY COUNTDOWN TIMER üéâ</div>
  <div class="countdown-timer">
    <div class="countdown-item">
      <span class="countdown-number" id="countdown-hours">24</span>
      <span class="countdown-label">HOURS</span>
    </div>
    <div class="countdown-item">
      <span class="countdown-number" id="countdown-minutes">60</span>
      <span class="countdown-label">MINUTES</span>
    </div>
    <div class="countdown-item">
      <span class="countdown-number" id="countdown-seconds">60</span>
      <span class="countdown-label">SECONDS</span>
    </div>
  </div>
</div>

<div id="wheelWrap" aria-label="Birthday wheel">
  <div id="pointer" aria-hidden="true"></div>
  <canvas id="wheelCanvas" width="290" height="290" role="img" aria-label="Prize wheel"></canvas>
</div>

<div id="controls">
  <button id="btn"><i class="fas fa-redo-alt"></i> üé° SPIN THE WHEEL üé°</button>
  <button id="resetBtn"><i class="fas fa-sync-alt"></i> üîÑ Reset Spins</button>
  <button id="muteBtn" title="Toggle Music">
    <span id="musicIcon">üéµ</span>
  </button>
</div>

<div id="status" aria-live="polite">
  <i class="fas fa-gift"></i> üéÅ Spins Left: <span id="chances">3</span> üéÅ
</div>

<!-- PRIZE DISPLAY -->
<div id="prize" aria-live="polite" role="status"></div>

<!-- Final Birthday Gift (Hidden until all spins used) -->
<div class="final-gift" id="finalGift">
  <div class="gift-title">üéÅ‚ú® YOUR BIRTHDAY SURPRISE GIFT! ‚ú®üéÅ</div>
  <div class="gift-emoji">üéÇüéâüéà</div>
  <div class="gift-content">
    <p>üéä CONGRATULATIONS BIRTHDAY STAR! üéä</p>
    <p>üéÅ You've completed all your spins! üéÅ</p>
    <p>‚ú® Your Final Birthday Gift is: ‚ú®</p>
    <p><strong>üéÇ 5GB DATAüì∂  üéÇ</strong></p>
    <p>üéà + UNLIMITED HAPPINESS üéà</p>
    <p>üíñ + LIFETIME OF JOY & LAUGHTER üíñ</p>
  </div>
  <div class="gift-emoji">ü•≥üéäüíù</div>
</div>

<div id="prizeLog">
  <h3><i class="fas fa-trophy"></i> üèÜ YOUR PRIZES WON üèÜ</h3>
  <ul id="prizeList">
    <li>üéØ No prizes won yet. Spin to win! üéØ</li>
  </ul>
</div>

<!-- Birthday Card -->
<div class="birthday-card-container">
  <div class="birthday-card">
    <div class="card-front">
      <h3><i class="fas fa-envelope"></i> üì¨ OPEN YOUR BIRTHDAY CARD! üì¨</h3>
      <div class="envelope-icon">üíå‚ú®</div>
      <p>üéâ Click to reveal your special message! üéâ</p>
    </div>
    <div class="card-inside">
      <p class="card-message">üéÇ To the most amazing person I know! ‚ú®<br><br>üéÅ Wishing you a birthday filled with magical moments, endless laughter, and dreams that come true! ü¶Ñ<br><br>üíñ May your special day be as wonderful as you are! üåü</p>
      <div class="card-signature">üíï With all my love,<br>Your Biggest Fan üíï</div>
    </div>
  </div>
</div>

<!-- Rating System -->
<div class="birthday-rating">
  <h4><i class="fas fa-star"></i> ‚≠ê RATE THIS BIRTHDAY SURPRISE! ‚≠ê</h4>
  <div class="stars">
    <span onclick="rateBirthday(1)">‚òÖ</span>
    <span onclick="rateBirthday(2)">‚òÖ</span>
    <span onclick="rateBirthday(3)">‚òÖ</span>
    <span onclick="rateBirthday(4)">‚òÖ</span>
    <span onclick="rateBirthday(5)">‚òÖ</span>
  </div>
  <p class="rating-message"></p>
</div>

<!-- VIDEO GALLERY SECTION (FIXED VERSION) -->
<div class="video-gallery-container">
  <h3 class="video-gallery-title">
    <i class="fas fa-video"></i> üé¨ BIRTHDAY MEMORIES VIDEOS üé¨
  </h3>
  <div class="video-gallery">
    <div class="video-item" autoplay="openVideoLightbox('birthday_video1.mp4')">
      <video preload="metadata" muted loop playsinline>
        <source src="birthday_video1.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <div class="video-play-button">‚ñ∂Ô∏è</div>
    </div>
    
    <div class="video-item" autoplay="openVideoLightbox('birthday_video2.mp4')">
      <video preload="metadata" muted loop playsinline>
        <source src="birthday_video2.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <div class="video-play-button">‚ñ∂Ô∏è</div>
    </div>
    
    <div class="video-item" auto="openVideoLightbox('birthday_video3.mp4')">
      <video preload="metadata" muted loop playsinline>
        <source src="birthday_video3.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <div class="video-play-button">‚ñ∂Ô∏è</div>
    </div>
    
    <div class="video-item" autoplay="openVideoLightbox('birthday_video4.mp4')">
      <video preload="metadata" muted loop playsinline>
        <source src="birthday_video4.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <div class="video-play-button">‚ñ∂Ô∏è</div>
    </div>
  </div>
</div>

<!-- PICTURE GALLERY -->
<h3 style="color:#fff; margin-top:15px; text-shadow: 0 3px 10px rgba(0,0,0,0.4); z-index: 20; position: relative; font-size: 24px;">
  <i class="fas fa-camera"></i> üì∏ BIRTHDAY MEMORIES GALLERY üì∏
</h3>
<div id="gallery">
  <img src="birthday1.jpg" alt="Birthday memory 1" class="gallery-medium">
  <img src="birthday2.jpg" alt="Birthday memory 2" class="gallery-large">
  <img src="birthday3.jpg" alt="Birthday memory 3" class="gallery-small">
  <img src="birthday4.jpg" alt="Birthday memory 4" class="gallery-medium">
  <img src="birthday5.jpg" alt="Birthday memory 5" class="gallery-medium">
  <img src="birthday6.jpg" alt="Birthday memory 6" class="gallery-small">
  <img src="birthday7.jpg" alt="Birthday memory 7" class="gallery-large">
  <img src="birthday8.jpg" alt="Birthday memory 8" class="gallery-medium">
  <img src="birthday9.jpg" alt="Birthday memory 9" class="gallery-large">
</div>

<div class="caption" id="caption">
üéÇüéà‚ú® HAPPY BIRTHDAY CELEBRATION! ‚ú®üéàüéÇ

üåü Today is YOUR special day ‚Äî a celebration of the incredible person you are! 
May your birthday sparkle ‚ú® with joy, shine üåü with laughter, and glow üí´ with love!

üéÅ Here's to creating magical memories ü¶Ñ, sharing priceless moments üíé, 
and building stories that you'll treasure forever! üìñ

üíù May all your birthday wishes come true like shooting stars! üå†
üåà Have the most spectacular, amazing, unforgettable birthday EVER! ü•≥

üéä CHEERS TO YOU, BIRTHDAY DEAR! üéä
</div>

<footer>
  <small>‚ú® Made with <i class="fas fa-heart" style="color:#ff4d6d;"></i> & magic for your special day! ‚ú® ‚Äî Click SPIN to begin the celebration! üéâ</small>
</footer>

<!-- SHARE BUTTON AT BOTTOM -->
<button id="shareBtn"><i class="fab fa-whatsapp"></i> üì§ SHARE MY PRIZE WITH BLESS! üì§</button>

<div class="toast-wrap" id="toastWrap" aria-hidden="true"></div>
<div class="win-banner" id="winBanner" role="dialog" aria-live="assertive" aria-hidden="true">
  <div class="title"><i class="fas fa-crown"></i> üéâ CONGRATULATIONS! üéâ</div>
  <div class="sub" id="winText"></div>
</div>

<script>
// ========== MOBILE OPTIMIZATION ==========
const isMobile = /Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
document.addEventListener('touchstart', function() {}, {passive: true});

function onReady(fn){ if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', fn); else fn(); }

// ========== MOBILE-FRIENDLY VIDEO LIGHTBOX ==========
function openVideoLightbox(videoSrc) {
  if(window.__bgMusic && !window.__bgMusic.paused) {
    window.__bgMusic.pause();
    window.__bgMusicWasPlaying = true;
  } else {
    window.__bgMusicWasPlaying = false;
  }
  
  const lightbox = document.createElement('div');
  lightbox.className = 'video-lightbox';
  lightbox.setAttribute('id', 'videoLightbox');
  
  lightbox.innerHTML = `
    <div class="video-lightbox-content">
      <div class="video-lightbox-header">
        <button class="close-video-lightbox-mobile" onclick="closeVideoLightbox()">
          <i class="fas fa-times"></i> Close
        </button>
        <div class="video-title">üé¨ Birthday Memory Video</div>
      </div>
      <video controls playsinline>
        <source src="${videoSrc}" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <button class="close-video-lightbox" onclick="closeVideoLightbox()">√ó</button>
      <div class="mobile-controls">
        <button class="mobile-close-btn" onclick="closeVideoLightbox()">
          <i class="fas fa-times-circle"></i> CLOSE VIDEO
        </button>
      </div>
    </div>
  `;
  
  document.body.appendChild(lightbox);
  document.body.style.overflow = 'hidden';
  
  const videoElement = lightbox.querySelector('video');
  
  lightbox.addEventListener('click', (e) => {
    if(e.target.className === 'video-lightbox') {
      closeVideoLightbox();
    }
  });
  
  document.addEventListener('keydown', function closeOnEsc(e) {
    if(e.key === 'Escape') {
      closeVideoLightbox();
      document.removeEventListener('keydown', closeOnEsc);
    }
  });
  
  videoElement.addEventListener('ended', () => {
    closeVideoLightbox();
  });
  
  videoElement.addEventListener('pause', () => {
    if(window.__bgMusic && window.__bgMusicWasPlaying && !isMuted) {
      window.__bgMusic.play().catch(() => {});
    }
  });
  
  videoElement.addEventListener('play', () => {
    if(window.__bgMusic && !window.__bgMusic.paused) {
      window.__bgMusic.pause();
    }
  });
  
  videoElement.play().catch(e => {
    console.log("Autoplay prevented:", e);
  });
}

function closeVideoLightbox() {
  const lightbox = document.getElementById('videoLightbox');
  if(!lightbox) return;
  
  const video = lightbox.querySelector('video');
  if(video) {
    video.pause();
    video.currentTime = 0;
  }
  
  if(window.__bgMusic && window.__bgMusicWasPlaying && !isMuted) {
    window.__bgMusic.play().catch(() => {});
  }
  
  lightbox.remove();
  document.body.style.overflow = 'auto';
}

// ========== VIDEO THUMBNAILS AUTO-PLAY ==========
function initVideoThumbnails() {
  const videoItems = document.querySelectorAll('.video-item video');
  
  videoItems.forEach(video => {
    const playPromise = video.play();
    
    if (playPromise !== undefined) {
      playPromise.catch(error => {
        console.log("Autoplay prevented:", error);
      });
    }
    
    video.addEventListener('mouseenter', () => {
      video.controls = true;
    });
    
    video.addEventListener('mouseleave', () => {
      video.controls = false;
    });
    
    video.addEventListener('touchstart', () => {
      video.controls = true;
      setTimeout(() => { video.controls = false; }, 3000);
    });
  });
}

// Create floating balloons
function createFloatingBalloons() {
  const balloonEmojis = ['üéà', 'üéà', 'üéà', 'üéà', 'üéà', 'üéà', 'üéà', 'üéà', 'üéà', 'üéà'];
  const balloonCount = isMobile ? 8 : 15;
  
  for(let i = 0; i < balloonCount; i++) {
    setTimeout(() => {
      const balloon = document.createElement('div');
      balloon.className = 'floating-balloon';
      balloon.style.left = `${Math.random() * 100}%`;
      balloon.style.animationDuration = `${isMobile ? 25 : 15 + Math.random() * 10}s`;
      balloon.style.animationDelay = `${Math.random() * 5}s`;
      balloon.innerHTML = balloonEmojis[Math.floor(Math.random() * balloonEmojis.length)];
      document.body.appendChild(balloon);
      
      balloon.addEventListener('click', () => {
        balloon.style.animation = 'pop 0.7s forwards';
        setTimeout(() => balloon.remove(), 700);
      });
      
      setTimeout(() => {
        if (balloon.parentNode) {
          balloon.remove();
        }
      }, isMobile ? 40000 : 25000);
    }, i * 500);
  }
}

// Create sparkles
function createSparkles() {
  const sparkleCount = isMobile ? 15 : 25;
  
  for(let i = 0; i < sparkleCount; i++) {
    const sparkle = document.createElement('div');
    sparkle.className = 'sparkle';
    sparkle.style.left = `${Math.random() * 100}%`;
    sparkle.style.top = `${Math.random() * 100}%`;
    sparkle.style.animationDelay = `${Math.random() * 3}s`;
    sparkle.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 65%)`;
    document.body.appendChild(sparkle);
  }
}

// Preload gallery images
function preloadGalleryImages() {
  const images = document.querySelectorAll('#gallery img');
  images.forEach(img => {
    const preload = new Image();
    preload.src = img.src;
    
    preload.onload = function() {
      img.classList.add('loaded');
    };
    
    preload.onerror = function() {
      img.classList.add('loaded');
    };
  });
}

function showToast(message, type='info', ms=2500){
  const wrap = document.getElementById('toastWrap');
  if(!wrap) return;
  const t = document.createElement('div');
  t.className = 'toast ' + (type || 'info');
  t.innerHTML = `<div>${message}</div><div class="bubbles" aria-hidden="true"></div>`;
  wrap.appendChild(t);
  
  t.style.opacity = '0';
  t.style.transform = 'translateY(-8px)';
  requestAnimationFrame(()=>{ t.style.transition='all 300ms ease'; t.style.opacity='1'; t.style.transform='translateY(0)'; });
  
  setTimeout(()=>{
    t.style.transition='all 320ms ease';
    t.style.opacity='0';
    t.style.transform='translateY(-10px)';
    setTimeout(()=> t.remove(), 350);
  }, ms);
}

function showWin(text, ms=3000){
  const b = document.getElementById('winBanner');
  const txt = document.getElementById('winText');
  if(!b || !txt) return;
  txt.textContent = text;
  txt.style.textAlign = 'center';
  b.classList.add('show');
  b.setAttribute('aria-hidden','false');
  
  createConfettiBurst(150);
  
  setTimeout(()=> {
    b.classList.remove('show');
    b.setAttribute('aria-hidden','true');
  }, ms);
}

function updatePrizeLog(newPrize){
  let prizesWon = JSON.parse(localStorage.getItem('bday_prizes_won') || '[]');
  const listEl = document.getElementById('prizeList');
  if(!listEl) return;
  
  if(newPrize){
    prizesWon.push({ prize: newPrize, time: new Date().toLocaleString() });
    localStorage.setItem('bday_prizes_won', JSON.stringify(prizesWon));
  }
  
  listEl.innerHTML = '';
  if(prizesWon.length === 0){
    listEl.innerHTML = '<li>üéØ No prizes won yet. Spin to win! üéØ</li>';
  } else {
    prizesWon.slice(-5).reverse().forEach(item => {
      const li = document.createElement('li');
      li.innerHTML = `<span><i class="fas fa-gift"></i> üéÅ ${item.prize} üéÅ</span><small style="opacity:0.7">${item.time.split(', ')[1]}</small>`;
      listEl.appendChild(li);
    });
  }
}

// Confetti burst function
function createConfettiBurst(count = 100) {
  const confettiContainer = document.querySelector('.confetti');
  const colors = ['#FFD700', '#FF1493', '#00FFFF', '#7CFC00', '#FFA500', '#9370DB', '#00CED1', '#FF69B4'];
  
  for(let i = 0; i < count; i++) {
    const confetti = document.createElement('span');
    confetti.style.left = Math.random() * 100 + 'vw';
    confetti.style.width = Math.random() * 15 + 5 + 'px';
    confetti.style.height = Math.random() * 15 + 5 + 'px';
    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
    confetti.style.animationDuration = Math.random() * 4 + 2 + 's';
    confetti.style.animationDelay = Math.random() * 2 + 's';
    confettiContainer.appendChild(confetti);
    
    setTimeout(() => {
      if (confetti.parentNode) {
        confetti.remove();
      }
    }, 6000);
  }
}

// Rating system
let userRating = 0;
function rateBirthday(rating) {
  userRating = rating;
  const stars = document.querySelectorAll('.stars span');
  stars.forEach((star, index) => {
    star.style.color = index < rating ? '#FFD700' : '#ddd';
    if (index < rating) {
      star.style.textShadow = '0 0 15px #FFD700, 0 0 25px #FFD700';
    } else {
      star.style.textShadow = '0 3px 8px rgba(0,0,0,0.3)';
    }
  });
  
  const messages = [
    "üòê Thanks for the 1 star! I'll try better next time!",
    "üôÇ Yay! 2 stars! Thanks for playing!",
    "üòä Awesome! 3 stars! Glad you're enjoying!",
    "üòÑ Wonderful! 4 stars! You're amazing!",
    "ü•≥ AMAZING! 5 STARS! YOU'RE THE BEST! THANK YOU! üéâüåü"
  ];
  
  const messageEl = document.querySelector('.rating-message');
  messageEl.textContent = messages[rating - 1];
  messageEl.style.color = rating >= 4 ? '#28a745' : rating >= 3 ? '#ffc107' : '#6c757d';
  messageEl.style.background = rating >= 4 ? 'rgba(40,167,69,0.1)' : rating >= 3 ? 'rgba(255,193,7,0.1)' : 'rgba(108,117,125,0.1)';
  
  createConfettiBurst(rating * 25);
  showToast(`üéØ Thanks for ${rating} star${rating > 1 ? 's' : ''}! You rock! üåü`, 'success', 2500);
  
  localStorage.setItem('bday_user_rating', rating.toString());
}

// Countdown timer
function updateCountdown() {
  const now = new Date();
  const endOfDay = new Date();
  endOfDay.setHours(23, 59, 59, 999);
  
  const diff = endOfDay - now;
  
  const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
  const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
  const seconds = Math.floor((diff % (1000 * 60)) / 1000);
  
  document.getElementById('countdown-hours').textContent = hours.toString().padStart(2, '0');
  document.getElementById('countdown-minutes').textContent = minutes.toString().padStart(2, '0');
  document.getElementById('countdown-seconds').textContent = seconds.toString().padStart(2, '0');
}

// Lightbox for images
function initLightbox() {
  document.querySelectorAll('#gallery img').forEach(img => {
    img.addEventListener('click', function() {
      const lightbox = document.createElement('div');
      lightbox.className = 'lightbox';
      
      const imgSrc = this.src;
      
      lightbox.innerHTML = `
        <div class="lightbox-content">
          <img src="${imgSrc}" alt="${this.alt}" class="lightbox-image">
          <button class="close-lightbox">√ó</button>
        </div>
      `;
      document.body.appendChild(lightbox);
      
      lightbox.addEventListener('click', (e) => {
        if(e.target.className === 'lightbox' || e.target.className === 'close-lightbox') {
          lightbox.remove();
        }
      });
    });
  });
}

// Show final gift
function showFinalGift() {
  const finalGift = document.getElementById('finalGift');
  finalGift.classList.add('show');
  createConfettiBurst(300);
  showToast('üéÅ‚ú® ALL SPINS USED! YOUR FINAL BIRTHDAY GIFT IS REVEALED! ‚ú®üéÅ', 'success', 7000);
  
  setTimeout(() => {
    finalGift.scrollIntoView({ behavior: 'smooth', block: 'center' });
  }, 500);
}

onReady(()=> {
  createFloatingBalloons();
  createSparkles();
  initLightbox();
  initVideoThumbnails();
  
  setTimeout(() => {
    preloadGalleryImages();
  }, 1000);
  
  updateCountdown();
  setInterval(updateCountdown, 1000);
  
  setInterval(createFloatingBalloons, 30000);
  
  const savedRating = localStorage.getItem('bday_user_rating');
  if (savedRating) {
    userRating = parseInt(savedRating);
    rateBirthday(userRating);
  }
  
  // ENTRY PASSWORD
  const PASSWORD = "12345";
  const RESET_PASSWORD = "Bless1";
  
  const MAX_SPINS = 3;
  const STORAGE_KEY = 'bday_spins_left';
  const PRIZE_KEY = 'bday_prizes_won';
  const SPIN_COUNT_KEY = 'bday_spin_count';
  
  let spinCount = parseInt(localStorage.getItem(SPIN_COUNT_KEY) || '0');

  let input;
  if (isMobile) {
    input = prompt("Enter password HINT(12345):");
  } else {
    input = prompt("üéÇ‚ú® WELCOME TO YOUR BIRTHDAY CELEBRATION, GOOD LUCK IN SPINNING YOUR WHEEL! ‚ú®üéÇ\n\nüîê Enter the secret password to begin the party! üéâ\n\nüí° Hint: It's 12345\n\nPassword:");
  }
  
  if (input !== PASSWORD) {
    showToast("‚ùå Wrong password! Access denied. üîí", 'error', 2500);
    setTimeout(()=> { 
      document.body.innerHTML = `
        <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; text-align: center; padding: 20px;">
          <h1 style="font-size: ${isMobile ? '32px' : '52px'}; margin-bottom: 25px;">üéÅüîí ACCESS DENIED üîíüéÅ</h1>
          <p style="font-size: ${isMobile ? '18px' : '22px'}; margin-bottom: 20px;">‚ùå Incorrect password! Please refresh and try again. üîÑ</p>
          <p style="margin-top: 20px; opacity: 0.9; font-size: ${isMobile ? '16px' : '18px'};">üí° Hint: The ENTRY password is <strong>12345</strong> üéØ</p>
          <div style="margin-top: 30px; font-size: ${isMobile ? '30px' : '40px'};">üîêüéÇüîì</div>
        </div>
      `; 
    }, 1000);
    return;
  }
  
  setTimeout(() => {
    showToast('üéâ‚ú® WELCOME TO YOUR BIRTHDAY CELEBRATION, GOOD LUCK IN SPINNING YOUR WHEEL, YOU HAVE 3 CHANCES! üéÇ‚ú®', 'success', 4500);
    createConfettiBurst(300);
  }, 1500);
  
  updatePrizeLog();

  function loadSpinsLeft(){ const v = parseInt(localStorage.getItem(STORAGE_KEY),10); return Number.isFinite(v) && v >=0 ? v : MAX_SPINS; }
  function saveSpinsLeft(n){ localStorage.setItem(STORAGE_KEY, String(n)); }
  let spinsLeft = loadSpinsLeft();
  const chancesEl = document.getElementById('chances');
  function updateChancesUI(){ 
    if(chancesEl) chancesEl.textContent = spinsLeft; 
    const b = document.getElementById('btn'); 
    if(b) {
      b.disabled = spinsLeft <= 0;
      if (spinsLeft <= 0) {
        b.innerHTML = '<i class="fas fa-lock"></i> üîí NO SPINS LEFT üîí';
        b.style.animation = 'none';
      } else {
        b.innerHTML = '<i class="fas fa-redo-alt"></i> üé° SPIN THE WHEEL üé°';
        b.style.animation = 'pulseShake 3s infinite ease-in-out';
      }
    }
  }
  updateChancesUI();
  
  let music = document.getElementById('bgMusic');
  if(!music) {
    music = document.createElement('audio');
    music.id = 'bgMusic';
    music.src = 'happybirthday.mp3'; 
    music.loop = true;
    music.preload = 'auto';
    document.body.appendChild(music);
  }
  window.__bgMusic = music;
  
  document.body.addEventListener('click', function initMusic() {
    if (window.__bgMusic && !window.__musicStarted) {
      window.__bgMusic.play().then(()=> {
        showToast('üéµüé∂ Birthday music playing! Enjoy the party! üé∂üéµ', 'success', 2500);
      }).catch(()=> {});
      window.__musicStarted = true;
      document.body.removeEventListener('click', initMusic);
    }
  });
  
  const muteBtn = document.getElementById('muteBtn');
  const musicIcon = document.getElementById('musicIcon');
  let isMuted = false;
  
  function updateMusicUI(){
    if(isMuted){
      musicIcon.textContent = 'üîá';
      muteBtn.title = 'Unmute Music';
      if(window.__bgMusic) window.__bgMusic.pause();
    } else {
      musicIcon.textContent = 'üéµ';
      muteBtn.title = 'Mute Music';
      if(window.__bgMusic) window.__bgMusic.play().catch(()=>{});
    }
  }
  
  if(muteBtn){
    muteBtn.addEventListener('touchstart', function(e) {
      if (isMobile) {
        this.style.transform = 'scale(0.9)';
      }
    });
    
    muteBtn.addEventListener('touchend', function(e) {
      if (isMobile) {
        this.style.transform = '';
      }
    });
    
    muteBtn.addEventListener('click', ()=>{
      isMuted = !isMuted;
      updateMusicUI();
      showToast(isMuted ? 'üîá Music Muted' : 'üéµ Music Unmuted', 'info', 1500);
    });
  }
  updateMusicUI();

  const canvas = document.getElementById('wheelCanvas');
  const ctx = canvas ? canvas.getContext('2d') : null;
  if(!canvas || !ctx){
    showToast('‚ùå Canvas not available ‚Äî spin disabled', 'error', 3000);
    return;
  }

  const prizes = ["üëó DRESS", "ü•§ COCACOLA", "üç¶ ICE CREAM", "üí∞ 200GH$", "üì± 15GB DATA", "üéÅ FREE GIFT", "üì∂ 5GB DATA", "üîÑ TRY AGAIN"];
  const colors = ["#FFD700", "#FF6B6B", "#4ECDC4", "#FFD166", "#06D6A0", "#FF9A8B", "#118AB2", "#EF476F"];
  const numSegments = prizes.length;
  const anglePerSegment = 2*Math.PI / numSegments;
  let currentRotation = 0;

  function drawWheel(rotation = 0) {
    const dpr = window.devicePixelRatio || 1;
    const displaySize = 290;
    
    canvas.style.width = displaySize + 'px';
    canvas.style.height = displaySize + 'px';
    canvas.width = displaySize * dpr;
    canvas.height = displaySize * dpr;
    ctx.scale(dpr, dpr);
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.save();
    
    const cx = displaySize / 2;
    const cy = displaySize / 2;
    const radius = 132;
    ctx.translate(cx, cy);
    ctx.rotate(rotation);
    
    for(let i = 0; i < numSegments; i++) {
      const gradient = ctx.createLinearGradient(0, -radius, 0, radius);
      gradient.addColorStop(0, colors[i % colors.length]);
      gradient.addColorStop(1, adjustColor(colors[i % colors.length], -40));
      
      ctx.beginPath();
      ctx.moveTo(0, 0);
      ctx.arc(0, 0, radius, i * anglePerSegment, (i + 1) * anglePerSegment);
      ctx.lineTo(0, 0);
      ctx.fillStyle = gradient;
      ctx.fill();
      ctx.strokeStyle = "#ffffff";
      ctx.lineWidth = 4;
      ctx.stroke();

      ctx.save();
      const textAngle = i * anglePerSegment + anglePerSegment / 2;
      ctx.rotate(textAngle);
      ctx.translate(radius - 45, 0);
      ctx.rotate(Math.PI / 2);
      ctx.fillStyle = "#033047";
      ctx.font = "bold 16px Inter, Arial";
      ctx.textAlign = "center";
      ctx.fillText(prizes[i], 0, 0);
      ctx.restore();
    }
    
    const centerGradient = ctx.createRadialGradient(0, 0, 0, 0, 0, 38);
    centerGradient.addColorStop(0, '#ffffff');
    centerGradient.addColorStop(0.5, '#ffccdd');
    centerGradient.addColorStop(1, '#ff99bb');
    
    ctx.beginPath();
    ctx.fillStyle = centerGradient;
    ctx.arc(0, 0, 38, 0, Math.PI * 2);
    ctx.fill();
    ctx.strokeStyle = '#ff4d6d';
    ctx.lineWidth = 4;
    ctx.stroke();
    
    ctx.fillStyle = "#ff6f96";
    ctx.font = "bold 26px Fredoka One, Arial";
    ctx.textAlign = "center";
    ctx.fillText("üéÇ", 0, 10);
    ctx.restore();
  }
  
  function adjustColor(color, amount) {
    let usePound = false;
    if (color[0] == "#") {
        color = color.slice(1);
        usePound = true;
    }
    const num = parseInt(color, 16);
    let r = (num >> 16) + amount;
    if (r > 255) r = 255;
    else if (r < 0) r = 0;
    let b = ((num >> 8) & 0x00FF) + amount;
    if (b > 255) b = 255;
    else if (b < 0) b = 0;
    let g = (num & 0x0000FF) + amount;
    if (g > 255) g = 255;
    else if (g < 0) g = 0;
    return (usePound ? "#" : "") + (g | (b << 8) | (r << 16)).toString(16).padStart(6, '0');
  }
  
  drawWheel(0);
  window.addEventListener('resize', () => {
    setTimeout(() => drawWheel(currentRotation), 100);
  });

  let latestPrize = "";

  function showPrizeText(text){
    const prizeEl = document.getElementById('prize');
    if(!prizeEl) return;
    prizeEl.textContent = text;
    prizeEl.style.textAlign = 'center';
    prizeEl.style.display = 'flex';
    prizeEl.style.alignItems = 'center';
    prizeEl.style.justifyContent = 'center';
    prizeEl.classList.remove('pop');
    void prizeEl.offsetWidth;
    prizeEl.classList.add('pop');
  }

  let spinning = false;
  
  function spinOnce(){
    if(spinning) return;
    if(spinsLeft <= 0){
      showToast("‚ùå No spins remaining. üîÑ Reset with the secret password.", 'error', 2500);
      updateChancesUI();
      return;
    }

    const wheelWrap = document.getElementById('wheelWrap');
    if(wheelWrap) {
      wheelWrap.classList.add('pulse-wheel');
      wheelWrap.scrollIntoView({ behavior: 'smooth', block: 'center' });
      setTimeout(() => wheelWrap.classList.remove('pulse-wheel'), 3000);
    }
    
    spinning = true;
    if(window.__bgMusic && !isMuted) window.__bgMusic.play().catch(()=>{});

    let prizeIndex;
    spinCount++;
    
    if (spinCount === 1) {
      prizeIndex = 2;
    } else if (spinCount === 2) {
      prizeIndex = 7;
    } else if (spinCount === 3) {
      prizeIndex = 6;
    } else {
      prizeIndex = Math.floor(Math.random() * prizes.length);
    }
    
    localStorage.setItem(SPIN_COUNT_KEY, spinCount.toString());

    const isSecondSpin = spinCount === 2;
    if (isSecondSpin) {
      showToast("üé∞‚ú® SPECIAL SPIN! Let's see what fate has for you... ‚ú®üé∞", 'info', 2500);
    }

    const segmentCenterAngle = prizeIndex * anglePerSegment + anglePerSegment/2;
    const targetRotation = (Math.PI * 2) - segmentCenterAngle - (Math.PI/2);
    
    const extraSpins = isSecondSpin ? 8 : 6;
    const totalRotation = currentRotation + (extraSpins * 2 * Math.PI) + targetRotation;

    const duration = isSecondSpin ? 3200 : 2500;
    let start = null;
    const startRotation = currentRotation;

    function easeOutCubic(t, b, c, d) {
      t /= d;
      t--;
      return c * (t * t * t + 1) + b;
    }

    function animateSpin(timestamp) {
      if (!start) start = timestamp;
      const elapsed = timestamp - start;
      const progress = Math.min(elapsed / duration, 1);
      
      const easedProgress = easeOutCubic(progress, 0, 1, 1);
      
      currentRotation = startRotation + (totalRotation - startRotation) * easedProgress;
      drawWheel(currentRotation);
      
      if (progress < 1) {
        requestAnimationFrame(animateSpin);
      } else {
        currentRotation = targetRotation % (Math.PI * 2);
        drawWheel(currentRotation);
        
        spinsLeft = Math.max(0, spinsLeft - 1);
        saveSpinsLeft(spinsLeft);
        updateChancesUI();

        const prizeText = isSecondSpin ? `üòÖ ${prizes[prizeIndex]} üòÖ` : `üéâ ${prizes[prizeIndex]} üéâ`;
        latestPrize = prizes[prizeIndex];
        
        showPrizeText(prizeText);
        showWin(prizeText, 2000);
        
        if (spinCount === 1) {
          showToast(`üç¶ YUM! You won ICE CREAM! üç® Keep spinning for more surprises! üé° You can try your luck again! üéØ`, 'success', 5500);
        } else if (spinCount === 2) {
          showToast(`üîÑ OOPS! TRY AGAIN! üòÖ Don't worry, you've got one more spin! üé° You can try your luck again! üçÄ`, 'error', 7000);
        } else if (spinCount === 3) {
          showToast(`üì∂ AWESOME! 5GB DATA! üì± You've used all your spins! Check your final birthday gift below! üéÅ‚ú®`, 'success', 5500);
        }
        
        updatePrizeLog(latestPrize);

        if (!isSecondSpin) {
          createConfettiBurst(100);
        }
        
        if (spinsLeft === 0) {
          setTimeout(() => {
            showFinalGift();
          }, 3000);
        }
        
        spinning = false;
      }
    }
    
    requestAnimationFrame(animateSpin);
  }

  const btn = document.getElementById('btn');
  btn.addEventListener('touchstart', function(e) {
    if (isMobile) {
      this.style.transform = 'scale(0.95)';
    }
  });
  
  btn.addEventListener('touchend', function(e) {
    if (isMobile) {
      this.style.transform = '';
      setTimeout(() => {
        if(window.__bgMusic && !isMuted) window.__bgMusic.play().catch(()=>{});
        spinOnce();
      }, 100);
    }
  });
  
  btn.addEventListener('click', ()=>{
    if(window.__bgMusic && !isMuted) window.__bgMusic.play().catch(()=>{});
    spinOnce();
  });

  const resetBtn = document.getElementById('resetBtn');
  resetBtn.addEventListener('click', ()=>{
    let resetPassword;
    if (isMobile) {
      resetPassword = prompt("Enter RESET password HINT (12345):");
    } else {
      resetPassword = prompt("üîÑ‚ú® RESET THE PARTY! ‚ú®üîÑ\n\nüîê Enter the RESET password:\n\nüí° Reset Password: 12345\n\nPassword:");
    }
    
    if (resetPassword !== RESET_PASSWORD) {
      showToast("‚ùå Incorrect reset password. Reset denied. üîí", 'error', 2500);
      return;
    }

    spinsLeft = MAX_SPINS;
    saveSpinsLeft(spinsLeft);
    updateChancesUI();
    
    localStorage.removeItem(PRIZE_KEY);
    updatePrizeLog();
    latestPrize = "";
    document.getElementById('prize').textContent = "";
    document.getElementById('prize').style.textAlign = 'center';
    
    document.getElementById('finalGift').classList.remove('show');
    
    spinCount = 0;
    localStorage.removeItem(SPIN_COUNT_KEY);
    
    currentRotation = 0;
    drawWheel(0);
    
    createConfettiBurst(150);
    showToast("üéä‚ú® EVERYTHING RESET! Party starts fresh! üé°‚ú®", 'success', 3500);
  });
  
  const shareBtn = document.getElementById('shareBtn');
  shareBtn.addEventListener('click', ()=>{
    const phone = "+2330597699623";
    const ratingText = userRating > 0 ? ` ‚≠ê Rated: ${userRating}/5 stars ‚≠ê` : '';
    const msg = `üéÇüéâ BIRTHDAY ALERT! üéâüéÇ\n\nI just won: ${latestPrize} on the Birthday Wheel! üé°\n${ratingText}\n\nWish me a happy birthday! ü•≥üéÅ‚ú®`;
    const url = `https://wa.me/${phone}?text=${encodeURIComponent(msg)}`;
    window.open(url, '_blank');
    
    showToast('üì§ Sharing your birthday prize! üéâ', 'success', 2000);
  });

  updateChancesUI();
  setInterval(createFloatingBalloons, isMobile ? 45000 : 35000);
});
</script>
</body>
</html>


